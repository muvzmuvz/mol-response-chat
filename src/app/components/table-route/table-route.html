<!-- –ü–æ–ª–µ –ø–æ–∏—Å–∫–∞ -->


<!-- –í—ã–±–æ—Ä –º–∞—Ä—à—Ä—É—Ç–∞ -->
<div class="route-selector">
  <label>
    <select [formControl]="routeControl" class="custom-select">
      <option *ngFor="let option of routeOptions" [value]="option.id">
        {{ option.name }}
      </option>
    </select>
  </label>

  <!-- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –º–∞—Ä—à—Ä—É—Ç–∞ -->
  <p tuiTextfieldSize="m" class="filters">
    <tui-textfield class="input">
      <label [style.width.px]="100" tuiLabel>–ü–æ–∏—Å–∫ –ø–æ —Ç–∞–±–ª–∏—Ü–µ</label>
      <input tuiTextfield [size]="size" [style.width.px]="300" placeholder="–í–≤–µ–¥–∏—Ç–µ –¥–ª—è –ø–æ–∏—Å–∫–∞..." [(ngModel)]="search"
        class="search-input" />
    </tui-textfield>
  </p>
  <button tuiButton appearance="primary" size="m" class="add-route-button" (click)="addRoute()">
    –î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç
  </button>
</div>

<!-- –¢–∞–±–ª–∏—Ü–∞ –º–∞—Ä—à—Ä—É—Ç–æ–≤ -->
<table tuiTable [size]="size" [style.width.%]="95">
  <thead>
    <tr>
      <th tuiTh (click)="onSort('route')" style="cursor:pointer">
        –ú–∞—Ä—à—Ä—É—Ç—ã
        <span *ngIf="sortColumn === 'route'" >{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }} </span>
      </th>
      <th tuiTh (click)="onSort('organization')" style="cursor:pointer">
        –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
        <span *ngIf="sortColumn === 'organization'" >{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span>
      </th>
      <th tuiTh (click)="onSort('phone')" style="cursor:pointer">
        –ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
        <span *ngIf="sortColumn === 'phone'" >{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span>
      </th>
      <th tuiTh (click)="onSort('status')" style="cursor:pointer">
        –°—Ç–∞—Ç—É—Å
        <span *ngIf="sortColumn === 'status'" >{{ sortDirection === 'asc' ? '‚ñ≤' : '‚ñº' }}</span>
      </th>
        
      <th tuiTh>
        –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
      </th>
      <th tuiTh>
        –î–µ–π—Å—Ç–≤–∏—è
      </th>
    </tr>
  </thead>
  <tbody tuiTbody>
    <tr *ngFor="let item of filteredData">
      <td tuiTd>
        <div [tuiCell]="size">
          <span tuiTitle>
            {{ item.checkbox.title }}
            <span tuiSubtitle *ngIf="item.checkbox.subtitle">{{ item.checkbox.subtitle }}</span>
          </span>
        </div>
      </td>
      <td tuiTd>
        <div [tuiCell]="size">
          <span tuiTitle>
            {{ item.title.title }}
            <span tuiSubtitle *ngIf="item.title.subtitle">{{ item.title.subtitle }}</span>
          </span>
        </div>
      </td>
      <td tuiTd>
        <div [tuiCell]="size">
          <span tuiTitle>
            {{ item.cell.phone }}
            <span tuiSubtitle>{{ item.cell.name }}</span>
          </span>
        </div>
      </td>
      <td tuiTd>
        <span [tuiStatus]="item.status.color">{{ item.status.value }}</span>
      </td>
            <td tuiTd>
        <span tuiTitle>{{ item.comment }}</span>
      </td>
      <td tuiTd>
        <div class="table-button">
          <button appearance="action" iconStart="@tui.pencil" size="s" tuiIconButton type="button"
            (click)="editRoute(item.id)">
            –ò–∑–º–µ–Ω–∏—Ç—å
          </button>
          <!-- <button appearance="action" iconStart="@tui.ellipsis" size="xs" tuiIconButton type="button">
          –ï—â–µ
        </button> -->
          <button appearance="error" iconStart="@tui.trash" size="s" tuiIconButton type="button"
            (click)="deleteRoute(item.id)">
            –£–¥–∞–ª–∏—Ç—å
          </button>
        </div>
      </td>
    </tr>
  </tbody>
</table>

<div class="modal" *ngIf="isAddModalOpen">
  <div class="modal-content">
    <h3>–î–æ–±–∞–≤–∏—Ç—å –º–∞—Ä—à—Ä—É—Ç</h3>
    <form [formGroup]="addForm" (ngSubmit)="submitAddForm()">
      <label>–ú–∞—Ä—à—Ä—É—Ç: <input formControlName="routeTitle" /></label>
      <label>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: <input formControlName="organization" /></label>
      <label>–ò–º—è: <input formControlName="name" /></label>
      <label>–¢–µ–ª–µ—Ñ–æ–Ω: <input formControlName="phone" /></label>
      <label>Email: <input formControlName="email" /></label>
      <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: <input formControlName="comment" /></label>
      <label>–°—Ç–∞—Ç—É—Å:
        <select formControlName="status">
          <option>–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
          <option>–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
          <option>–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
        </select>
      </label>
      <div class="modal-buttons">
        <button tuiButton appearance="primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button tuiButton type="button" (click)="cancelModals()">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </form>
  </div>
</div>

<!-- üîπ –ú–æ–¥–∞–ª–∫–∞: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç -->
<div class="modal" *ngIf="isEditModalOpen">
  <div class="modal-content">
    <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –º–∞—Ä—à—Ä—É—Ç</h3>
    <form [formGroup]="editForm" (ngSubmit)="submitEditForm()">
      <label>–ú–∞—Ä—à—Ä—É—Ç: <input formControlName="routeTitle" /></label>
      <label>–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è: <input formControlName="organization" /></label>
      <label>–ò–º—è: <input formControlName="name" /></label>
      <label>–¢–µ–ª–µ—Ñ–æ–Ω: <input formControlName="phone" /></label>
      <label>Email: <input formControlName="email" /></label>
      <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: <input formControlName="comment" /></label>
      <label>–°—Ç–∞—Ç—É—Å:
        <select formControlName="status">
          <option>–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
          <option>–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
          <option>–ù–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
        </select>
      </label>
      <div class="modal-buttons">
        <button tuiButton appearance="primary" type="submit">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
        <button tuiButton type="button" (click)="cancelModals()">–û—Ç–º–µ–Ω–∞</button>
      </div>
    </form>
  </div>
</div>